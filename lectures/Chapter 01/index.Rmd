---
title       : Chapter 1, Income and Output
subtitle    : (Income and Capital)
author      : Patrick Toche
framework   : html5slides  # {minimal, io2012, html5slides, shower, dzslides, ...}
hitheme     : solarized_light  # {tomorrow, solarized_light, zenburn...}
mode        : selfcontained  # {selfcontained, standalone, draft}
widgets     : mathjax   # {mathjax, quiz, bootstrap}
ext_widgets : {rCharts: [libraries/nvd3, libraries/morris, libraries/highcharts]}
github      : {user: patricktoche, repo: piketty}
url         : {lib: "../../libraries", assets: "../../assets"}
css         : "../../assets/css/custom.css" # tested
lecnum      : "01"

---

```{r 'preamble', message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, tidy = FALSE, comment = NA, cache = FALSE}
require(knitr)
library(png)   # to display external png and control dimensions
library(grid)  # to display external png and control dimensions
opts_chunk$set(echo = FALSE, cache = FALSE)
source('../../shared/shared.R')
```

### The distribution of world output

<figure>  
<img src = "../../figures/Figure_1_1.png" alt = "Figure 1.1. The distribution of world output, 1700-2012.">  
<figcaption class = 'figcaption'>Figure 1.1. Europe's GDP made 47 percent of world GDP in 1913, down to 25 percent in 2012.
</figcaption>  
</figure> 
<footer class = 'footnote'>
Concept and data: Thomas Piketty. Chart created with ``ggplot2`` (author: Hadley Wickham)
</footer>  

---

### The distribution of world output

```{r 'Figure_1_1_rCharts',  message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, tidy = FALSE, cache = FALSE}  
require(rCharts)
load("../../data/df_1_1.Rda") 
# To do: dynamic range selection
# round data for rChart tooltip display
df_1_1$value <- round(df_1_1$value, 3)
n <- nPlot(data = df_1_1, value ~ Year, group = 'variable', color = 'variable', shape = 'variable', type = 'stackedAreaChart') 
n$chart(xDomain = c(1700, 2012), clipEdge = TRUE)
n$chart(yDomain = c(0, 1))  # use yDomain instead of forceY
n$yAxis(axisLabel = 'Share in world output (% of total)')
n$chart(margin = list(left = 80)) 
n$yAxis(tickFormat = "#! function(d) {return Math.round(d*100*100)/100 + '%'} !#")
n$xAxis(axisLabel = 'Year')
n$chart(style = 'stack')
n$chart(showControls = FALSE)
n$chart(useInteractiveGuideline = TRUE)
n$chart(color = c('#EFF3FF', '#BDD7E7', '#6BAED6', '#2171B5'))  # To do: automate color selection
n$addParams(height = 500, width = 800)
n$save('figures/Figure_1_1.html', standalone = TRUE)
``` 
<iframe src = 'figures/Figure_1_1.html' alt = "Figure 1.1. The distribution of world output, 1700-2012.">
</iframe><icaption class = 'icaption'>Figure 1.1. Europe's GDP made 47 percent of world GDP in 1913, down to 25 percent in 2012.</icaption> 
<footer class = 'footnote'>  
Concept and data: Thomas Piketty. Chart created with ``rCharts`` (author: Ramnath Vaidyanathan)  
</footer>  

---

### The distribution of world population

<figure>  
<img src = "../../figures/Figure_1_2.png" alt = "Figure 1.2. The distribution of world population, 1700-2012.">  
<figcaption class = 'figcaption'>Figure 1.2. Europe's population made 26 percent of world population in 1913, down to 10 percent in 2012.</figcaption>  
</figure> 
<footer class = 'footnote'>
Concept and data: Thomas Piketty. Chart created with ``ggplot2`` (author: Hadley Wickham)
</footer>  

---

### The distribution of world population

```{r 'Figure_1_2_rCharts',  message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, tidy = FALSE, cache = FALSE}  
require(rCharts)
load("../../data/df_1_2.Rda") 
# round data for rChart tooltip display
df_1_2$value <- round(df_1_2$value, 3)
n <- nPlot(data = df_1_2, value ~ Year, group = 'variable', color = 'variable', shape = 'variable', type = 'stackedAreaChart') 
n$chart(xDomain = c(1700, 2012), clipEdge = TRUE)
n$chart(yDomain = c(0, 1))  # use yDomain instead of forceY
n$yAxis(axisLabel = 'Share in world output (% of total)')
n$chart(margin = list(left = 80)) 
n$yAxis(tickFormat = "#! function(d) {return Math.round(d*100*100)/100 + '%'} !#")
n$xAxis(axisLabel = 'Year')
n$chart(style = 'stack')
n$chart(showControls = FALSE)
n$chart(useInteractiveGuideline = TRUE)
n$chart(color = c('#EFF3FF', '#BDD7E7', '#6BAED6', '#2171B5'))  # To do: automate color selection
n$addParams(height = 500, width = 800)
n$save('figures/Figure_1_2.html', standalone = TRUE)
```
<iframe src = 'figures/Figure_1_2.html' alt = "Figure 1.2. The growth rate of world population from Antiquity to 2100.">
</iframe><icaption class = 'icaption'>Figure 1.2. Europe's population made 26 percent of world population in 1913, down to 10 percent in 2012.</icaption>
<footer class = 'footnote'>  
Chart created with ``rCharts`` (author: Ramnath Vaidyanathan)  
</footer>  

---

### Global Inequality

<figure>  
<img src = "../../figures/Figure_1_3.png" alt = "Figure 1.3. Global Inequality, 1700-2012.">  
<figcaption class = 'figcaption'>Figure 1.3. Per capita GDP in Asia-Africa went from 37 percent of world average in 1950 to 61 percent in 2012. Divergence then convergence?</figcaption>  
</figure> 
<footer class = 'footnote'>
Chart created with ``ggplot2`` (author: Hadley Wickham)
</footer>  

---

### Global Inequality

```{r 'Figure_1_3_rCharts',  message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, tidy = FALSE, cache = FALSE}  
require(rCharts)
load("../../data/df_1_3.Rda") 
# round data for rChart tooltip display
df_1_3$value <- round(df_1_3$value, 2)
n <- nPlot(data = df_1_3, value ~ Year, group = 'variable', color = 'variable', shape = 'variable', type = 'lineChart') 
n$chart(xDomain = c(1700, 2012), clipEdge = TRUE)
n$chart(forceY = c(.2, 2.6))
n$yAxis(axisLabel = 'Per capital GDP (% of world average)')
n$chart(margin = list(left = 80)) 
n$yAxis(tickFormat = "#! function(d) {return Math.round(d*100*100)/100 + '%'} !#")
n$xAxis(axisLabel = 'Year')
n$chart(useInteractiveGuideline = TRUE)
n$chart(color = colorPalette)
n$addParams(height = 500, width = 800)
n$setTemplate(afterScript = '<style>
  .nv-point {
    stroke-opacity: 1!important;
    stroke-width: 5px!important;
    fill-opacity: 1!important;
  } 
</style>')
n$save('figures/Figure_1_3.html', standalone = TRUE)
```
<iframe src = 'figures/Figure_1_3.html' alt = "Figure 1.3. Global Inequality, 1700-2012.">
</iframe><icaption class = 'icaption'>Figure 1.3. Per capita GDP in Asia-Africa went from 37 percent of world average in 1950 to 61 percent in 2012. Divergence then convergence?</icaption>
<footer class = 'footnote'>  
Concept and data: Thomas Piketty. Chart created with ``rCharts`` (author: Ramnath Vaidyanathan)  
</footer>  

---

### Global Inequality

<figure>  
<img src = "../../figures/Figure_1_4.png" alt = "Figure 1.4. Global Inequality, 1700-2012.">  
<figcaption class = 'figcaption'>Figure 1.4. In 2012, 1 euro was worth \$1.30 according to current exchange rate, but \$1.20 in purchasing power parity.</figcaption>  
</figure> 
<footer class = 'footnote'>
Concept and data: Thomas Piketty. Chart created with ``ggplot2`` (author: Hadley Wickham)
</footer>  

---

### Global Inequality

```{r 'Figure_1_4_rCharts',  message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, tidy = FALSE, cache = FALSE}  
require(rCharts)
load("../../data/df_1_4.Rda") 
# round data for rChart tooltip display
df_1_4$value <- round(df_1_4$value, 2)
n <- nPlot(data = df_1_4, value ~ Year, group = 'variable', color = 'variable', shape = 'variable', type = 'lineChart') 
n$chart(forceY = c(.8, 1.5))
n$yAxis(axisLabel = 'Exchange rate Euro/Dollar (in dollars)')
n$chart(margin = list(left = 80))
n$xAxis(axisLabel = 'Year')
n$yAxis(tickFormat = "#! function(y) {return '$' + y;} !#")
n$chart(useInteractiveGuideline = TRUE)
n$chart(color = colorPalette)
n$addParams(height = 500, width = 800)
n$setTemplate(afterScript = '<style>
  .nv-point {
    stroke-opacity: 1!important;
    stroke-width: 5px!important;
    fill-opacity: 1!important;
  } 
</style>')
n$save('figures/Figure_1_4.html', standalone = TRUE)
```
<iframe src = 'figures/Figure_1_4.html' alt = "Figure 1.4. Global Inequality, 1700-2012.">
</iframe><icaption class = 'icaption'>Figure 1.4. In 2012, 1 euro was worth \\$1.30 according to current exchange rate, but \\$1.20 in purchasing power parity.</icaption>
<footer class = 'footnote'>  
Concept and data: Thomas Piketty. Chart created with ``rCharts`` (author: Ramnath Vaidyanathan)  
</footer>  

---

### Exchange rate and purchasing power parity: euro/yuan.

<figure>  
<img src = "../../figures/Figure_1_5.png" alt = "Figure 1.5. Exchange rate and purchasing power parity: euro v. yuan.">  
<figcaption class = 'figcaption'>Figure 1.5. In 2012, 1 euro was worth 8 yuan according to current exchange rate, but 5 yuan in purchasing power parity.</figcaption>  
</figure> 
<footer class = 'footnote'>
Concept and data: Thomas Piketty. Chart created with ``ggplot2`` (author: Hadley Wickham)
</footer>  

---

### Exchange rate and purchasing power parity: euro/yuan.

```{r 'Figure_1_5_rCharts',  message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, tidy = FALSE, cache = FALSE}  
require(rCharts)
load("../../data/df_1_5.Rda") 
# round data for rChart tooltip display
df_1_5$value <- round(df_1_5$value, 2)
n <- nPlot(data = df_1_5, value ~ Year, group = 'variable', color = 'variable', shape = 'variable', type = 'lineChart') 
n$chart(forceY = c(1, 12))
n$yAxis(axisLabel = 'Exchange rate Euro/Yuan (in yuans)')
n$chart(margin = list(left = 80)) 
n$xAxis(axisLabel = 'Year')
n$yAxis(tickFormat = "#! function(y) {return 'Â¥' + y;} !#")
n$chart(useInteractiveGuideline = TRUE)
n$chart(color = colorPalette)
n$addParams(height = 500, width = 800)
n$setTemplate(afterScript = '<style>
  .nv-point {
    stroke-opacity: 1!important;
    stroke-width: 5px!important;
    fill-opacity: 1!important;
  } </style>')
n$save('figures/Figure_1_5.html', standalone = TRUE)
```
<iframe src = 'figures/Figure_1_5.html' alt = "Figure 1.5. Exchange rate and purchasing power parity: euro v. yuan.">
</iframe><icaption class = 'icaption'>Figure 1.5. In 2012, 1 euro was worth 8 yuan according to current exchange rate, but 5 yuan in purchasing power parity.</icaption>
<footer class = 'footnote'>  
Concept and data: Thomas Piketty. Chart created with ``rCharts`` (author: Ramnath Vaidyanathan)  
</footer>  

